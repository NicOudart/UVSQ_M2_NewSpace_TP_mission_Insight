{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"M2 NewSpace : \"De l'instrument \u00e0 la publication\" TP panorama de la cha\u00eene d'acquisition, transmission, traitement et interpr\u00e9tation dans le contexte d'une mission d'exploration spatiale Cours con\u00e7u pour les \u00e9tudiants du M2 \"NewSpace\" de l'Universit\u00e9 de Versailles Saint-Quentin (UVSQ) Pr\u00e9sentation du TP Lors des sc\u00e9ances de cours, nous avons vu un panorama de la cha\u00eene d'acquisition - transmission - traitement - interpr\u00e9tation des donn\u00e9es d'un instrument, dans un contexte de mission d'exploration spatiale. Ceci est un TP d'application des \u00e9l\u00e9ments vus en cours, afin de v\u00e9rifier que vous avez bien compris les concepts et les enjeux associ\u00e9s. Le sujet sera le sismom\u00e8tre martien SEIS (CNES) de la mission Insight (NASA). Lors de ce TP, vous allez : Lire des extraits de l'article de d\u00e9finition de SEIS par P. Lognonn\u00e9, pour en comprendre le contexte scientifique de la mission et le design de l'instrument. Etudier la partie \"acquisition\" de la cha\u00eene de l'instrument. Etudier la cha\u00eene de transmission des cubesats de la mission Insight. Traiter et analyser des enregistrements SEIS d'un s\u00e9isme martien, afin de d\u00e9tecter les 4 grands types d'ondes sismiques. Ce TP fera appel \u00e0 de la programmation Python pour les calculs et les traitements. Vous trouverez en fin de TP les r\u00e9ponses aux questions. Credits \u00a9 Nicolas OUDART","title":"Accueil"},{"location":"#m2-newspace-de-linstrument-a-la-publication","text":"TP panorama de la cha\u00eene d'acquisition, transmission, traitement et interpr\u00e9tation dans le contexte d'une mission d'exploration spatiale Cours con\u00e7u pour les \u00e9tudiants du M2 \"NewSpace\" de l'Universit\u00e9 de Versailles Saint-Quentin (UVSQ)","title":"M2 NewSpace : \"De l'instrument \u00e0 la publication\""},{"location":"#presentation-du-tp","text":"Lors des sc\u00e9ances de cours, nous avons vu un panorama de la cha\u00eene d'acquisition - transmission - traitement - interpr\u00e9tation des donn\u00e9es d'un instrument, dans un contexte de mission d'exploration spatiale. Ceci est un TP d'application des \u00e9l\u00e9ments vus en cours, afin de v\u00e9rifier que vous avez bien compris les concepts et les enjeux associ\u00e9s. Le sujet sera le sismom\u00e8tre martien SEIS (CNES) de la mission Insight (NASA). Lors de ce TP, vous allez : Lire des extraits de l'article de d\u00e9finition de SEIS par P. Lognonn\u00e9, pour en comprendre le contexte scientifique de la mission et le design de l'instrument. Etudier la partie \"acquisition\" de la cha\u00eene de l'instrument. Etudier la cha\u00eene de transmission des cubesats de la mission Insight. Traiter et analyser des enregistrements SEIS d'un s\u00e9isme martien, afin de d\u00e9tecter les 4 grands types d'ondes sismiques. Ce TP fera appel \u00e0 de la programmation Python pour les calculs et les traitements. Vous trouverez en fin de TP les r\u00e9ponses aux questions.","title":"Pr\u00e9sentation du TP"},{"location":"#credits","text":"\u00a9 Nicolas OUDART","title":"Credits"},{"location":"1_Contexte/","text":"Etape 1 : Contexte scientifique La mission Insight de la NASA a atterrit sur Mars en novembre 2018, et a fonctionn\u00e9 de f\u00e9vrier 2019 jusqu\u2019\u00e0 d\u00e9cembre 2022. Ce TP se base sur l\u2019article de P. Lognonn\u00e9 intitul\u00e9 \u00ab SEIS: Insight\u2019s Seismic Experiment for Internal Structure of Mars \u00bb, publi\u00e9 dans Space Science Reviews en 2019. Source : https://doi.org/10.1007/s11214-018-0574-6 En voici quelques extraits : Extrait 1 \"The InSight mission will deploy the first complete geophysical observatory on Mars following in the footsteps of the Apollo Lunar Surface Experiments Package (ALSEP) deployed on the Moon during the Apollo program. It will thus provide the first ground truth constraints on interior structure of the planet. The InSight spacecraft was launched on May 5, 2018 and landed on Mars on November 26, 2018 in Elysium Planitia. The three primary scientific investigations are the Seismic Experiment for Interior Structure (SEIS), the Heat Flow and Physical Properties Package (HP3), a self-hammering mole that deploys a tether with temperature sensors to a depth of 3\u20135 m and the Rotation and Interior Structure Experiment (RISE), an X-band precision tracking experiment which will follow the motion of the lander over a Martian year to determine the precession and nutation of Mars.\" Extrait 2 \"The SEIS instrument has 4 main components: \u2013 The Sensor Assembly (SA). It accommodates two independent, 3 axes seismometers: a Very Broad Band (VBB) oblique seismometer and a miniature Short Period (SP) seismometer. [\u2026] \u2013 The EBox (Electronic Box), a set of electronic cards located inside the lander\u2019s thermal enclosure. \u2013 The tether that makes the electrical link between the SA and the EBox. \u2013 The WTS (Wind and Thermal Shield) that is deployed after the SA and over it. It gives an extra protection against winds and temperature variations.\" Extrait 3 \"Funding of all subsystems has been made without fund transfer and has been therefore supported by the French (CNES) [\u2026]\" A partir de ces extraits, et en faisant appel \u00e0 vos connaissances sur les articles scientifiques et les missions d'exploration spatiale, r\u00e9pondez aux questions suivantes : Question 1 : De quelle mission de la NASA l\u2019instrument SEIS fait-il partie ? Question 2: Quel est l\u2019objectif scientifique de cette mission ? Question 3 : De quel type de plateforme s\u2019agit-il ? Question 4 : Quels autres instruments contient la plateforme ? Pr\u00e9cisez pour chacun s\u2019il s\u2019agit de remote-sensing ou de direct-sensing, s\u2019il s\u2019agit d\u2019un instrument actif ou passif. Question 5 : Quels capteurs contient SEIS ? Question 6 : Quel institut est responsable du d\u00e9veloppement de l\u2019instrument ? Quel est probablement le r\u00f4le de P. Lognonn\u00e9 vis-\u00e0-vis de SEIS ?","title":"1. Contexte scientifique"},{"location":"1_Contexte/#etape-1-contexte-scientifique","text":"La mission Insight de la NASA a atterrit sur Mars en novembre 2018, et a fonctionn\u00e9 de f\u00e9vrier 2019 jusqu\u2019\u00e0 d\u00e9cembre 2022. Ce TP se base sur l\u2019article de P. Lognonn\u00e9 intitul\u00e9 \u00ab SEIS: Insight\u2019s Seismic Experiment for Internal Structure of Mars \u00bb, publi\u00e9 dans Space Science Reviews en 2019. Source : https://doi.org/10.1007/s11214-018-0574-6 En voici quelques extraits : Extrait 1 \"The InSight mission will deploy the first complete geophysical observatory on Mars following in the footsteps of the Apollo Lunar Surface Experiments Package (ALSEP) deployed on the Moon during the Apollo program. It will thus provide the first ground truth constraints on interior structure of the planet. The InSight spacecraft was launched on May 5, 2018 and landed on Mars on November 26, 2018 in Elysium Planitia. The three primary scientific investigations are the Seismic Experiment for Interior Structure (SEIS), the Heat Flow and Physical Properties Package (HP3), a self-hammering mole that deploys a tether with temperature sensors to a depth of 3\u20135 m and the Rotation and Interior Structure Experiment (RISE), an X-band precision tracking experiment which will follow the motion of the lander over a Martian year to determine the precession and nutation of Mars.\" Extrait 2 \"The SEIS instrument has 4 main components: \u2013 The Sensor Assembly (SA). It accommodates two independent, 3 axes seismometers: a Very Broad Band (VBB) oblique seismometer and a miniature Short Period (SP) seismometer. [\u2026] \u2013 The EBox (Electronic Box), a set of electronic cards located inside the lander\u2019s thermal enclosure. \u2013 The tether that makes the electrical link between the SA and the EBox. \u2013 The WTS (Wind and Thermal Shield) that is deployed after the SA and over it. It gives an extra protection against winds and temperature variations.\" Extrait 3 \"Funding of all subsystems has been made without fund transfer and has been therefore supported by the French (CNES) [\u2026]\" A partir de ces extraits, et en faisant appel \u00e0 vos connaissances sur les articles scientifiques et les missions d'exploration spatiale, r\u00e9pondez aux questions suivantes : Question 1 : De quelle mission de la NASA l\u2019instrument SEIS fait-il partie ? Question 2: Quel est l\u2019objectif scientifique de cette mission ? Question 3 : De quel type de plateforme s\u2019agit-il ? Question 4 : Quels autres instruments contient la plateforme ? Pr\u00e9cisez pour chacun s\u2019il s\u2019agit de remote-sensing ou de direct-sensing, s\u2019il s\u2019agit d\u2019un instrument actif ou passif. Question 5 : Quels capteurs contient SEIS ? Question 6 : Quel institut est responsable du d\u00e9veloppement de l\u2019instrument ? Quel est probablement le r\u00f4le de P. Lognonn\u00e9 vis-\u00e0-vis de SEIS ?","title":"Etape 1 : Contexte scientifique"},{"location":"2_Acquisition/","text":"Etape 2 : Acquisition des mesures par l'instrument Dans la suite de l\u2019article, P. Lognonn\u00e9 d\u00e9crit les diff\u00e9rents types de s\u00e9ismes qui \u00e9taient attendus sur Mars en 2019 : Extrait 4 \"[\u2026] the most reliable seismological secondary data that could be extracted should be: \u2013 travel times of body waves (in the short period range, 0.1\u20135 Hz) \u2013 group and phase velocities of Rayleigh surface waves (in the long period range, 0.01\u20130.1 Hz) \u2013 eigenfrequencies of spheroidal fundamental normal modes in the frequency range of 0.01\u20130.02 Hz.\" A partir de cet extrait, r\u00e9pondez aux questions suivantes : Question 7 : Quelle doit \u00eatre la plage de fr\u00e9quences des capteurs de SEIS afin de pouvoir mesurer les 3 types s\u00e9ismes ? Question 8 : Quel doit \u00eatre le nombre minimum d\u2019\u00e9chantillons acquis par seconde pour \u00e9viter le repliement de spectre ? Pour information : la valeur choisie par l\u2019\u00e9quipe SEIS est de 20 \u00e9chantillons par seconde. Dans son article, P. Lognonn\u00e9 d\u00e9crit ensuite la conversion analogique-num\u00e9rique des signaux mesur\u00e9s par VBB (ADC = CAN en anglais) : Extrait 5 \"For the acquisition of the science channels a 24 bit sigma-delta ADC (AD7712) has been chosen [\u2026] Full scale range are \u00b125 Volt for the VBBs (for both velocity and position outputs).\" En vous basant sur cet extrait, r\u00e9pondez aux questions suivantes : Question 9 : Que repr\u00e9sente ici 1 bit en termes de tension (arrondi au \u00b5V) ? Question 10 : Avec la convention du compl\u00e9ment \u00e0 2, comment serait repr\u00e9sent\u00e9 en binaire une tension de -3V ? Pour r\u00e9pondre \u00e0 cette derni\u00e8re question, \u00e9crivez une fonction Python qui convertisse une tension entre -25 et 25 V en un binaire de 24 bits en respectant la convention du compl\u00e9ment \u00e0 2. Le nombre binaire pourra \u00eatre retourn\u00e9 sous la forme d'un string.","title":"2. Acquisition des mesures"},{"location":"2_Acquisition/#etape-2-acquisition-des-mesures-par-linstrument","text":"Dans la suite de l\u2019article, P. Lognonn\u00e9 d\u00e9crit les diff\u00e9rents types de s\u00e9ismes qui \u00e9taient attendus sur Mars en 2019 : Extrait 4 \"[\u2026] the most reliable seismological secondary data that could be extracted should be: \u2013 travel times of body waves (in the short period range, 0.1\u20135 Hz) \u2013 group and phase velocities of Rayleigh surface waves (in the long period range, 0.01\u20130.1 Hz) \u2013 eigenfrequencies of spheroidal fundamental normal modes in the frequency range of 0.01\u20130.02 Hz.\" A partir de cet extrait, r\u00e9pondez aux questions suivantes : Question 7 : Quelle doit \u00eatre la plage de fr\u00e9quences des capteurs de SEIS afin de pouvoir mesurer les 3 types s\u00e9ismes ? Question 8 : Quel doit \u00eatre le nombre minimum d\u2019\u00e9chantillons acquis par seconde pour \u00e9viter le repliement de spectre ? Pour information : la valeur choisie par l\u2019\u00e9quipe SEIS est de 20 \u00e9chantillons par seconde. Dans son article, P. Lognonn\u00e9 d\u00e9crit ensuite la conversion analogique-num\u00e9rique des signaux mesur\u00e9s par VBB (ADC = CAN en anglais) : Extrait 5 \"For the acquisition of the science channels a 24 bit sigma-delta ADC (AD7712) has been chosen [\u2026] Full scale range are \u00b125 Volt for the VBBs (for both velocity and position outputs).\" En vous basant sur cet extrait, r\u00e9pondez aux questions suivantes : Question 9 : Que repr\u00e9sente ici 1 bit en termes de tension (arrondi au \u00b5V) ? Question 10 : Avec la convention du compl\u00e9ment \u00e0 2, comment serait repr\u00e9sent\u00e9 en binaire une tension de -3V ? Pour r\u00e9pondre \u00e0 cette derni\u00e8re question, \u00e9crivez une fonction Python qui convertisse une tension entre -25 et 25 V en un binaire de 24 bits en respectant la convention du compl\u00e9ment \u00e0 2. Le nombre binaire pourra \u00eatre retourn\u00e9 sous la forme d'un string.","title":"Etape 2 : Acquisition des mesures par l'instrument"},{"location":"3_Transmission/","text":"Etape 3 : Transmission des donn\u00e9es En parall\u00e8le d\u2019Insight, la NASA a d\u00e9ploy\u00e9 2 CubeSats 6U nomm\u00e9s MarCO-A et MarCO-B, comme d\u00e9monstrateurs technologiques. Ils ont servi de relais entre Insight et la Terre durant la phase de descente. Nous allons \u00e9tudier rapidement le bilan de liaison donn\u00e9 par le JPL pour ce syst\u00e8me. Voici selon le JPL les informations du budget de liaison Mars-Terre des satellites MarCO : Param\u00e8tre Valeur Distance \u00e9metteur-r\u00e9cepteur 160 millions de km Fr\u00e9quence \u00e9mise 7,16 GHz Puissance \u00e9mise 73 dBm Gain d'antenne en \u00e9mission 67 dBi Pertes en \u00e9mission 1 dB Gain d'antenne en r\u00e9ception 9 dBi Pertes en r\u00e9ception 3 dB Bruit -170 dB Question 11 : Ecrivez une fonction Python qui prenne ces param\u00e8tres en entr\u00e9e, et calcule le SNR \u00e0 la r\u00e9ception sur Terre. Quel SNR obtenez-vous pour les valeurs du tableau ? Est-ce un plut\u00f4t bon SNR ? Le JPL indique qu\u2019un d\u00e9bit de 63 bits/s \u00e9tait attendu pour la communication Mars-Terre des CubeSats MarCO. En faisant l\u2019hypoth\u00e8se d\u2019un bruit blanc Gaussien, et avec le SNR obtenu \u00e0 la question pr\u00e9c\u00e9dente : Question 12 : Ecrivez une fonction Python qui calcule la largeur de spectre minimum n\u00e9cessaire pour atteindre un d\u00e9bit donn\u00e9. Quelle largeur de spectre obtenez-vous pour 63 bits/s ? Est-ce r\u00e9aliste ?","title":"3. Transmission des donn\u00e9es"},{"location":"3_Transmission/#etape-3-transmission-des-donnees","text":"En parall\u00e8le d\u2019Insight, la NASA a d\u00e9ploy\u00e9 2 CubeSats 6U nomm\u00e9s MarCO-A et MarCO-B, comme d\u00e9monstrateurs technologiques. Ils ont servi de relais entre Insight et la Terre durant la phase de descente. Nous allons \u00e9tudier rapidement le bilan de liaison donn\u00e9 par le JPL pour ce syst\u00e8me. Voici selon le JPL les informations du budget de liaison Mars-Terre des satellites MarCO : Param\u00e8tre Valeur Distance \u00e9metteur-r\u00e9cepteur 160 millions de km Fr\u00e9quence \u00e9mise 7,16 GHz Puissance \u00e9mise 73 dBm Gain d'antenne en \u00e9mission 67 dBi Pertes en \u00e9mission 1 dB Gain d'antenne en r\u00e9ception 9 dBi Pertes en r\u00e9ception 3 dB Bruit -170 dB Question 11 : Ecrivez une fonction Python qui prenne ces param\u00e8tres en entr\u00e9e, et calcule le SNR \u00e0 la r\u00e9ception sur Terre. Quel SNR obtenez-vous pour les valeurs du tableau ? Est-ce un plut\u00f4t bon SNR ? Le JPL indique qu\u2019un d\u00e9bit de 63 bits/s \u00e9tait attendu pour la communication Mars-Terre des CubeSats MarCO. En faisant l\u2019hypoth\u00e8se d\u2019un bruit blanc Gaussien, et avec le SNR obtenu \u00e0 la question pr\u00e9c\u00e9dente : Question 12 : Ecrivez une fonction Python qui calcule la largeur de spectre minimum n\u00e9cessaire pour atteindre un d\u00e9bit donn\u00e9. Quelle largeur de spectre obtenez-vous pour 63 bits/s ? Est-ce r\u00e9aliste ?","title":"Etape 3 : Transmission des donn\u00e9es"},{"location":"4_Traitement/","text":"Etape 4 : Traitement et analyse des donn\u00e9es Le 4 mai 2022, un s\u00e9isme d\u2019une magnitude estim\u00e9e de 5 a \u00e9t\u00e9 mesur\u00e9 par SEIS. Nomm\u00e9 \u00ab S1222a \u00bb, c\u2019est le plus intense jamais d\u00e9tect\u00e9 sur Mars. Contrairement \u00e0 d\u2019autres s\u00e9ismes importants mesur\u00e9s par SEIS, il n\u2019aurait pas pour origine un impact m\u00e9t\u00e9oritique. Il s\u2019agirait donc d\u2019un \u00e9v\u00e8nement tectonique, qui a potentiellement d\u00e9clench\u00e9 des avalanches de poussi\u00e8re dans la r\u00e9gion. Vous trouverez ici un fichier hdf5 \u00ab Insight_SEIS_S1222a.h5 \u00bb contenant l'enregistrement de ce s\u00e9isme par SEIS. Vous allez \u00e9crire un script Python pour ouvrir, traiter et analyser les donn\u00e9es des capteurs VBB (axes u,v,w) de SEIS contenant l\u2019enregistrement du s\u00e9isme S1222a. Pour commencer, importez les biblioth\u00e8ques suivantes : import h5py import numpy as np import matplotlib.pyplot as plt from scipy.signal import ShortTimeFFT from scipy.signal.windows import * from scipy.signal import butter, lfilter Vous en aurez besoin dans cette partie du TP : h5py vous servira \u00e0 importer les fichiers contenant les donn\u00e9es (format hdf5). numpy vous servira \u00e0 manipuler des matrices de donn\u00e9es. matplotlib vous servira \u00e0 afficher des graphiques. scipy.signal vous servira \u00e0 fen\u00eatrer / appliquer une STFT / filtrer un signal. Lecture et affichage des donn\u00e9es Ouvrez le fichier hdf5 avec la commande suivante, en rempla\u00e7ant \u00ab path \u00bb par le chemin du fichier sur votre ordinateur : hf = h5py.File('path') Le fichier contient 4 vecteurs de donn\u00e9es : \u2018time\u2019 contenant l\u2019axe des temps (s) et \u2018VBB_u\u2019 / \u2018VBB_v\u2019 / \u2018VBB_w\u2019 contenant les mesures des axes u/v/w du capteur VBB (mm/s). Pour r\u00e9cup\u00e9rer ces vecteurs, il faut utiliser les commandes : t = hf.get('time') vbb_u = hf.get('VBB_u') vbb_v = hf.get('VBB_v') vbb_w = hf.get('VBB_w') t, vbb_u, vbb_v et vbb_w sont ici des objets de la librairie h5py, et ne sont pas directement utilisables pour des traitements / affichages. Il faut les convertir en numpy arrays avec les commandes suivantes : t = np.array(t) vbb_u = np.array(vbb_u) vbb_v = np.array(vbb_v) vbb_w = np.array(vbb_w) Vous pouvez maintenant afficher les donn\u00e9es avec matplotlib. Voici par exemple pour vbb_u : plt.plot(t,vbb_u,'r-') plt.xlabel('\u2026') plt.ylabel('\u2026') plt.title('\u2026') plt.show() Question 13 : Affichez sous la forme d\u2019une figure le signal de VBB sur l\u2019axe u, avec un titre et des l\u00e9gendes correctes. Vous devriez obtenir une s\u00e9rie temporelle de la forme suivante : Question 14 : Ce signal est-il causal ou acausal ? Est-il d\u00e9terministe ou al\u00e9atoire ? Est-il p\u00e9riodique ou stationnaire ? Analyse spectrale par FFT Dans la suite, nous allons \u00e9tudier le contenu en fr\u00e9quences de ce signal. Comme mentionn\u00e9 en partie 2, le pas de temps de ce signal discret est 0.05 s, et sa dur\u00e9e totale est de 1500 s. Question 15 : Quelle est la plage de fr\u00e9quences et la r\u00e9solution d\u2019un spectre obtenu apr\u00e8s FFT de ce signal ? Pensez-vous qu\u2019il soit pertinent d\u2019appliquer directement la FFT \u00e0 ce signal ? Non, car la fr\u00e9quence et l'amplitude de celui-ci varie au cours du temps. Dans la suite, vous allez chercher \u00e0 produire un spectrogramme de ce signal, une repr\u00e9sentation plus adapt\u00e9e pour son analyse. Analyse spectrale par STFT Pour afficher un spectrogramme des donn\u00e9es de SEIS, vous allez utiliser la fonction STFT de la biblioth\u00e8que Python \u00ab scipy \u00bb. Mais avant toute chose, il nous faut d\u00e9terminer des param\u00e8tres pour cette fonction. On s\u00e9lectionne en g\u00e9n\u00e9ral une puissance de 2 pour le nombre d\u2019\u00e9chantillons de la fen\u00eatre glissante d\u2019une STFT. Question 16 : Sachant que le pas de temps est de 0.05 s, quelle puissance de 2 minimum faut-il pour obtenir un spectrogramme avec une r\u00e9solution fr\u00e9quentielle inf\u00e9rieure \u00e0 0,1 Hz ? On ajoute aussi souvent un \"overlap\" \u00e0 la fen\u00eatre glissante pour \"lisser\" le spectrogramme. Question 17 : Quel doit \u00eatre le nombre d\u2019\u00e9chantillons entre 2 positions de la fen\u00eatre pour avoir un \u00ab overlap \u00bb de 50 % ? Vous pouvez maintenant initialiser une fonction STFT avec la commande suivante : STFT = ShortTimeFFT(win=np.ones(x),hop=y,fs=z,mfft=x*8,scale_to='magnitude') Il faut remplacer x par le nombre d\u2019\u00e9chantillons dans la fen\u00eatre glissante, y par le nombre d\u2019\u00e9chantillons entre 2 positions de la fen\u00eatre, z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal en Hz. Le facteur 8 sur le param\u00e8tre \u00ab mfft \u00bb permet de r\u00e9aliser une interpolation X8 par \u00ab zero-padding \u00bb. L\u2019amplitude des spectrogrammes sera normalis\u00e9e par la fonction. Calculez le spectrogramme du signal de VBB mesur\u00e9 pour l\u2019axe u avec : spec_vbb_u = STFT.stft(vbb_u) Cr\u00e9ez les vecteurs temps et fr\u00e9quences correspondants \u00e0 votre spectrogramme avec les commandes suivantes : t_axis = np.linspace(0,T,np.shape(spec_vbb_u)[1]) f_axis = np.linspace(0,z/2,np.shape(spec_vbb_u)[0]) Il faut remplacer z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal en Hz, et T par la dur\u00e9e total du signal en s. Vous pouvez \u00e0 pr\u00e9sent afficher votre spectrogramme avec les commandes suivantes : plt.pcolormesh(t_axis,f_axis,abs(spec_vbb_u),cmap='binary') plt.xlabel('\u2026') plt.ylabel('\u2026') plt.colorbar() plt.show() Donnez des l\u00e9gendes pertinentes \u00e0 votre figure. Vous devez obtenir une figure de la forme suivante : On observe comme des oscillations parasites au niveau des fl\u00e8ches rouges : Question 18 : A quoi correspondent ces art\u00e9facts ? Question 19 : Pour r\u00e9duire ces art\u00e9facts en favorisant la r\u00e9solution, quelle fen\u00eatre choisiriez-vous entre Hann, Hamming et Blackman ? Vous pouvez cr\u00e9er une nouvelle fonction STFT avec votre fen\u00eatre, en utilisant r\u00e9-utilisant la commande pr\u00e9c\u00e9dente : STFT = ShortTimeFFT(win=hann(x),hop=y,fs=z,mfft=x*8,scale_to='magnitude') Il faut remplacer \"hann\" par le nom de la fen\u00eatre que vous avez choisie. Appliquez cette nouvelle STFT au signal, et g\u00e9n\u00e9rez un nouveau spectrogramme avec des l\u00e9gendes correctes. Vous devez obtenir une figure de la forme suivante : Analyse apr\u00e8s filtrage Les 2 types d\u2019ondes visibles sur le spectrogramme arrivent \u00e0 des temps diff\u00e9rents car elles ne se propagent pas \u00e0 la m\u00eame vitesse dans le sol martien. D\u2019o\u00f9 P comme \u00ab primaire \u00bb, et S comme \u00ab secondaire \u00bb. On utilise d\u2019ailleurs souvent cette diff\u00e9rence de temps d\u2019arriv\u00e9e pour mesurer la distance \u00e0 l\u2019\u00e9picentre du s\u00e9isme. Ces ondes sont des ondes de volume. Apr\u00e8s les ondes de volume, arrivent en g\u00e9n\u00e9ral les ondes de surface. Elles sont divis\u00e9es en 2 cat\u00e9gories : ondes de Rayleigh et ondes de Love. De par leur nature, ce sont ces ondes sismiques qui provoquent le plus de d\u00e9g\u00e2ts \u00e0 la surface de la Terre. Les ondes de surface ne sont pas visibles sur notre spectrogramme car masqu\u00e9es par les ondes de volume. Afin de les observer, nous allons donc devoir filtrer le signal. Pour rappel, dans son article P. Lognonn\u00e9 donnait les caract\u00e9ristiques fr\u00e9quentielles des diff\u00e9rentes ondes sismiques (\u00ab body waves \u00bb = ondes de volume) : Extrait 6 \"\u2013 [\u2026] body waves (in the short period range, 0.1\u20135 Hz) \u2013 [\u2026] surface waves (in the long period range, 0.01\u20130.1 Hz)\" Question 20 : Quel type de filtre utiliseriez-vous pour faire ressortir les ondes de surface et att\u00e9nuer les ondes de volume ? Question 21 : Quelle(s) fr\u00e9quence(s) de coupure choisiriez-vous ? Vous pouvez cr\u00e9er les coefficients de la partie non-r\u00e9cursive (b) et r\u00e9cursive (a) de votre filtre avec la commande suivante : b,a = butter(3,k,fs=z,btype='n') Vous devez remplacer k par la fr\u00e9quence de coupure du filtre (ou une liste s\u2019il y en a plusieurs, en Hz), remplacer z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal (en Hz), et n le nom du filtre que vous souhaitez utiliser (\u00ab lowpass \u00bb pour passe-bas, \u00ab highpass \u00bb pour passe-haut, \u00ab bandpass \u00bb pour passe-bande, \u00ab bandstop \u00bb pour coupe-bande). Le param\u00e8tre 3 est l\u2019ordre du mod\u00e8le. La fonction s\u2019appelle \u00ab Butter \u00bb en r\u00e9f\u00e9rence \u00e0 la technique de Butterworth utilis\u00e9e pour g\u00e9n\u00e9rer le filtre. Appliquez votre filtre aux donn\u00e9es VBB de l\u2019axe w avec la commande suivante : vbb_w_filt = lfilter(b,a,vbb_w) Vous pouvez ensuite afficher le signal de la m\u00eame fa\u00e7on que pr\u00e9c\u00e9demment : plt.plot(t,vbb_w_filt,'r-') Donnez alors des l\u00e9gendes pertinentes \u00e0 votre figure. On observe \u00e0 pr\u00e9sent les 2 types d\u2019ondes de surface, indiqu\u00e9es par des fl\u00e8ches rouges. Le filtrage a aussi fait ressortir des pics, indiqu\u00e9s par des fl\u00e8ches vertes. Ce sont des art\u00e9facts correspondant aux relaxations de l\u2019instrument, qui est soumis \u00e0 de forts contrastes de temp\u00e9rature sur Mars. Pour aller plus loin : Question bonus 1 : Essayez d'augmenter l'ordre du filtre. Quel est l'impact sur le r\u00e9sultat ? Pouvez-vous expliquer ce qui se passe ? Question bonus 2 : Essayez le m\u00eame traitement sur les mesures des autres axes. Observez-vous la m\u00eame chose ?","title":"4. Traitement et analyse"},{"location":"4_Traitement/#etape-4-traitement-et-analyse-des-donnees","text":"Le 4 mai 2022, un s\u00e9isme d\u2019une magnitude estim\u00e9e de 5 a \u00e9t\u00e9 mesur\u00e9 par SEIS. Nomm\u00e9 \u00ab S1222a \u00bb, c\u2019est le plus intense jamais d\u00e9tect\u00e9 sur Mars. Contrairement \u00e0 d\u2019autres s\u00e9ismes importants mesur\u00e9s par SEIS, il n\u2019aurait pas pour origine un impact m\u00e9t\u00e9oritique. Il s\u2019agirait donc d\u2019un \u00e9v\u00e8nement tectonique, qui a potentiellement d\u00e9clench\u00e9 des avalanches de poussi\u00e8re dans la r\u00e9gion. Vous trouverez ici un fichier hdf5 \u00ab Insight_SEIS_S1222a.h5 \u00bb contenant l'enregistrement de ce s\u00e9isme par SEIS. Vous allez \u00e9crire un script Python pour ouvrir, traiter et analyser les donn\u00e9es des capteurs VBB (axes u,v,w) de SEIS contenant l\u2019enregistrement du s\u00e9isme S1222a. Pour commencer, importez les biblioth\u00e8ques suivantes : import h5py import numpy as np import matplotlib.pyplot as plt from scipy.signal import ShortTimeFFT from scipy.signal.windows import * from scipy.signal import butter, lfilter Vous en aurez besoin dans cette partie du TP : h5py vous servira \u00e0 importer les fichiers contenant les donn\u00e9es (format hdf5). numpy vous servira \u00e0 manipuler des matrices de donn\u00e9es. matplotlib vous servira \u00e0 afficher des graphiques. scipy.signal vous servira \u00e0 fen\u00eatrer / appliquer une STFT / filtrer un signal.","title":"Etape 4 : Traitement et analyse des donn\u00e9es"},{"location":"4_Traitement/#lecture-et-affichage-des-donnees","text":"Ouvrez le fichier hdf5 avec la commande suivante, en rempla\u00e7ant \u00ab path \u00bb par le chemin du fichier sur votre ordinateur : hf = h5py.File('path') Le fichier contient 4 vecteurs de donn\u00e9es : \u2018time\u2019 contenant l\u2019axe des temps (s) et \u2018VBB_u\u2019 / \u2018VBB_v\u2019 / \u2018VBB_w\u2019 contenant les mesures des axes u/v/w du capteur VBB (mm/s). Pour r\u00e9cup\u00e9rer ces vecteurs, il faut utiliser les commandes : t = hf.get('time') vbb_u = hf.get('VBB_u') vbb_v = hf.get('VBB_v') vbb_w = hf.get('VBB_w') t, vbb_u, vbb_v et vbb_w sont ici des objets de la librairie h5py, et ne sont pas directement utilisables pour des traitements / affichages. Il faut les convertir en numpy arrays avec les commandes suivantes : t = np.array(t) vbb_u = np.array(vbb_u) vbb_v = np.array(vbb_v) vbb_w = np.array(vbb_w) Vous pouvez maintenant afficher les donn\u00e9es avec matplotlib. Voici par exemple pour vbb_u : plt.plot(t,vbb_u,'r-') plt.xlabel('\u2026') plt.ylabel('\u2026') plt.title('\u2026') plt.show() Question 13 : Affichez sous la forme d\u2019une figure le signal de VBB sur l\u2019axe u, avec un titre et des l\u00e9gendes correctes. Vous devriez obtenir une s\u00e9rie temporelle de la forme suivante : Question 14 : Ce signal est-il causal ou acausal ? Est-il d\u00e9terministe ou al\u00e9atoire ? Est-il p\u00e9riodique ou stationnaire ?","title":"Lecture et affichage des donn\u00e9es"},{"location":"4_Traitement/#analyse-spectrale-par-fft","text":"Dans la suite, nous allons \u00e9tudier le contenu en fr\u00e9quences de ce signal. Comme mentionn\u00e9 en partie 2, le pas de temps de ce signal discret est 0.05 s, et sa dur\u00e9e totale est de 1500 s. Question 15 : Quelle est la plage de fr\u00e9quences et la r\u00e9solution d\u2019un spectre obtenu apr\u00e8s FFT de ce signal ? Pensez-vous qu\u2019il soit pertinent d\u2019appliquer directement la FFT \u00e0 ce signal ? Non, car la fr\u00e9quence et l'amplitude de celui-ci varie au cours du temps. Dans la suite, vous allez chercher \u00e0 produire un spectrogramme de ce signal, une repr\u00e9sentation plus adapt\u00e9e pour son analyse.","title":"Analyse spectrale par FFT"},{"location":"4_Traitement/#analyse-spectrale-par-stft","text":"Pour afficher un spectrogramme des donn\u00e9es de SEIS, vous allez utiliser la fonction STFT de la biblioth\u00e8que Python \u00ab scipy \u00bb. Mais avant toute chose, il nous faut d\u00e9terminer des param\u00e8tres pour cette fonction. On s\u00e9lectionne en g\u00e9n\u00e9ral une puissance de 2 pour le nombre d\u2019\u00e9chantillons de la fen\u00eatre glissante d\u2019une STFT. Question 16 : Sachant que le pas de temps est de 0.05 s, quelle puissance de 2 minimum faut-il pour obtenir un spectrogramme avec une r\u00e9solution fr\u00e9quentielle inf\u00e9rieure \u00e0 0,1 Hz ? On ajoute aussi souvent un \"overlap\" \u00e0 la fen\u00eatre glissante pour \"lisser\" le spectrogramme. Question 17 : Quel doit \u00eatre le nombre d\u2019\u00e9chantillons entre 2 positions de la fen\u00eatre pour avoir un \u00ab overlap \u00bb de 50 % ? Vous pouvez maintenant initialiser une fonction STFT avec la commande suivante : STFT = ShortTimeFFT(win=np.ones(x),hop=y,fs=z,mfft=x*8,scale_to='magnitude') Il faut remplacer x par le nombre d\u2019\u00e9chantillons dans la fen\u00eatre glissante, y par le nombre d\u2019\u00e9chantillons entre 2 positions de la fen\u00eatre, z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal en Hz. Le facteur 8 sur le param\u00e8tre \u00ab mfft \u00bb permet de r\u00e9aliser une interpolation X8 par \u00ab zero-padding \u00bb. L\u2019amplitude des spectrogrammes sera normalis\u00e9e par la fonction. Calculez le spectrogramme du signal de VBB mesur\u00e9 pour l\u2019axe u avec : spec_vbb_u = STFT.stft(vbb_u) Cr\u00e9ez les vecteurs temps et fr\u00e9quences correspondants \u00e0 votre spectrogramme avec les commandes suivantes : t_axis = np.linspace(0,T,np.shape(spec_vbb_u)[1]) f_axis = np.linspace(0,z/2,np.shape(spec_vbb_u)[0]) Il faut remplacer z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal en Hz, et T par la dur\u00e9e total du signal en s. Vous pouvez \u00e0 pr\u00e9sent afficher votre spectrogramme avec les commandes suivantes : plt.pcolormesh(t_axis,f_axis,abs(spec_vbb_u),cmap='binary') plt.xlabel('\u2026') plt.ylabel('\u2026') plt.colorbar() plt.show() Donnez des l\u00e9gendes pertinentes \u00e0 votre figure. Vous devez obtenir une figure de la forme suivante : On observe comme des oscillations parasites au niveau des fl\u00e8ches rouges : Question 18 : A quoi correspondent ces art\u00e9facts ? Question 19 : Pour r\u00e9duire ces art\u00e9facts en favorisant la r\u00e9solution, quelle fen\u00eatre choisiriez-vous entre Hann, Hamming et Blackman ? Vous pouvez cr\u00e9er une nouvelle fonction STFT avec votre fen\u00eatre, en utilisant r\u00e9-utilisant la commande pr\u00e9c\u00e9dente : STFT = ShortTimeFFT(win=hann(x),hop=y,fs=z,mfft=x*8,scale_to='magnitude') Il faut remplacer \"hann\" par le nom de la fen\u00eatre que vous avez choisie. Appliquez cette nouvelle STFT au signal, et g\u00e9n\u00e9rez un nouveau spectrogramme avec des l\u00e9gendes correctes. Vous devez obtenir une figure de la forme suivante :","title":"Analyse spectrale par STFT"},{"location":"4_Traitement/#analyse-apres-filtrage","text":"Les 2 types d\u2019ondes visibles sur le spectrogramme arrivent \u00e0 des temps diff\u00e9rents car elles ne se propagent pas \u00e0 la m\u00eame vitesse dans le sol martien. D\u2019o\u00f9 P comme \u00ab primaire \u00bb, et S comme \u00ab secondaire \u00bb. On utilise d\u2019ailleurs souvent cette diff\u00e9rence de temps d\u2019arriv\u00e9e pour mesurer la distance \u00e0 l\u2019\u00e9picentre du s\u00e9isme. Ces ondes sont des ondes de volume. Apr\u00e8s les ondes de volume, arrivent en g\u00e9n\u00e9ral les ondes de surface. Elles sont divis\u00e9es en 2 cat\u00e9gories : ondes de Rayleigh et ondes de Love. De par leur nature, ce sont ces ondes sismiques qui provoquent le plus de d\u00e9g\u00e2ts \u00e0 la surface de la Terre. Les ondes de surface ne sont pas visibles sur notre spectrogramme car masqu\u00e9es par les ondes de volume. Afin de les observer, nous allons donc devoir filtrer le signal. Pour rappel, dans son article P. Lognonn\u00e9 donnait les caract\u00e9ristiques fr\u00e9quentielles des diff\u00e9rentes ondes sismiques (\u00ab body waves \u00bb = ondes de volume) : Extrait 6 \"\u2013 [\u2026] body waves (in the short period range, 0.1\u20135 Hz) \u2013 [\u2026] surface waves (in the long period range, 0.01\u20130.1 Hz)\" Question 20 : Quel type de filtre utiliseriez-vous pour faire ressortir les ondes de surface et att\u00e9nuer les ondes de volume ? Question 21 : Quelle(s) fr\u00e9quence(s) de coupure choisiriez-vous ? Vous pouvez cr\u00e9er les coefficients de la partie non-r\u00e9cursive (b) et r\u00e9cursive (a) de votre filtre avec la commande suivante : b,a = butter(3,k,fs=z,btype='n') Vous devez remplacer k par la fr\u00e9quence de coupure du filtre (ou une liste s\u2019il y en a plusieurs, en Hz), remplacer z par la fr\u00e9quence d\u2019\u00e9chantillonnage du signal (en Hz), et n le nom du filtre que vous souhaitez utiliser (\u00ab lowpass \u00bb pour passe-bas, \u00ab highpass \u00bb pour passe-haut, \u00ab bandpass \u00bb pour passe-bande, \u00ab bandstop \u00bb pour coupe-bande). Le param\u00e8tre 3 est l\u2019ordre du mod\u00e8le. La fonction s\u2019appelle \u00ab Butter \u00bb en r\u00e9f\u00e9rence \u00e0 la technique de Butterworth utilis\u00e9e pour g\u00e9n\u00e9rer le filtre. Appliquez votre filtre aux donn\u00e9es VBB de l\u2019axe w avec la commande suivante : vbb_w_filt = lfilter(b,a,vbb_w) Vous pouvez ensuite afficher le signal de la m\u00eame fa\u00e7on que pr\u00e9c\u00e9demment : plt.plot(t,vbb_w_filt,'r-') Donnez alors des l\u00e9gendes pertinentes \u00e0 votre figure. On observe \u00e0 pr\u00e9sent les 2 types d\u2019ondes de surface, indiqu\u00e9es par des fl\u00e8ches rouges. Le filtrage a aussi fait ressortir des pics, indiqu\u00e9s par des fl\u00e8ches vertes. Ce sont des art\u00e9facts correspondant aux relaxations de l\u2019instrument, qui est soumis \u00e0 de forts contrastes de temp\u00e9rature sur Mars. Pour aller plus loin : Question bonus 1 : Essayez d'augmenter l'ordre du filtre. Quel est l'impact sur le r\u00e9sultat ? Pouvez-vous expliquer ce qui se passe ? Question bonus 2 : Essayez le m\u00eame traitement sur les mesures des autres axes. Observez-vous la m\u00eame chose ?","title":"Analyse apr\u00e8s filtrage"},{"location":"5_Reponses/","text":"Etape 5 : R\u00e9ponses aux questions","title":"5. R\u00e9ponses aux questions"},{"location":"5_Reponses/#etape-5-reponses-aux-questions","text":"","title":"Etape 5 : R\u00e9ponses aux questions"}]}